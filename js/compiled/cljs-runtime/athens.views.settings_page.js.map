{"version":3,"sources":["athens/views/settings_page.cljs"],"mappings":";;AAOA,AAAA,AAAMA,AACHC;AADH,AAEE,AAAA,AAAIC;;AACJ,AAAA,AAAIC;;AACJ,AAAA,AAAA,AAACC;;AACD,AAAA,AAACC,AAAOJ;;AAGV,AAAA,AAAMK,AACHL;AADH,AAEE,AAAA,AAAIE;;AACJ,AAAA,AAAID;;AACJ,AAAA,AAAA,AAACE;;AACD,AAAA,AAACC,AAAOJ;;AAGV,AAAA,AAAMM,AACHN;AADH,AAEE,AAAA,AAAAO,AAAKP;AACH,AAACK,AAAOL;;AACR,AAACD,AAAQC;;;AAGb,AAAA,AAAMQ;AAAN,AAEE,AAAMR,AAAW,AAACS,AAAO,AAAA,AAAIP;AAA7B,AACE;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKG,AAAA,AAAAK,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKP,AAIHU,AAAkB,AAAA,AAAAH,AAASP;AAThC,AAUwB,AAACM,AAAaN;AAVtC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAWK,AAAA,AAAAO,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKP,AAEEW,AAGAC","names":["athens.views.settings-page/opt-out","opted-out?","js/posthog","js/window","js/localStorage.setItem","cljs.core/reset!","athens.views.settings-page/opt-in","athens.views.settings-page/handle-click","cljs.core/deref","athens.views.settings-page/settings-page","reagent.core.atom","athens.views.buttons/button","js/module$node_modules$$material_ui$icons$index.ToggleOn","js/module$node_modules$$material_ui$icons$index.ToggleOff"],"sourcesContent":["(ns athens.views.settings-page\n  (:require\n    [\"@material-ui/icons\" :as mui-icons]\n    [athens.views.buttons :refer [button]]\n    [reagent.core :as r]))\n\n\n(defn opt-out\n  [opted-out?]\n  (.. js/posthog (capture \"opt-out\"))\n  (.. js/window -posthog opt_out_capturing)\n  (js/localStorage.setItem \"sentry\" \"off\")\n  (reset! opted-out? true))\n\n\n(defn opt-in\n  [opted-out?]\n  (.. js/window -posthog opt_in_capturing)\n  (.. js/posthog (capture \"opt-in\"))\n  (js/localStorage.setItem \"sentry\" \"on\")\n  (reset! opted-out? false))\n\n\n(defn handle-click\n  [opted-out?]\n  (if @opted-out?\n    (opt-in opted-out?)\n    (opt-out opted-out?)))\n\n\n(defn settings-page\n  []\n  (let [opted-out? (r/atom (.. js/window -posthog has_opted_out_capturing))]\n    (fn []\n      [:div {:style {:display \"flex\"\n                     :margin \"0vh 5vw\"\n                     :flex-direction \"column\"}}\n       [:h2 \"Settings\"]\n       (if @opted-out?\n         [:h5 \"Opted Out of Analytics\"]\n         [:h5 \"Opted Into Analytics\"])\n       [:div {:style {:margin \"10px 0\"}}\n        [button {:primary  (false? @opted-out?)\n                 :on-click #(handle-click opted-out?)}\n         (if @opted-out?\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOn]\n            [:span \"\\uD83D\\uDE41 We understand.\"]]\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOff]\n            [:span \"\\uD83D\\uDE00 Thanks for helping make Athens better!\"]])]]\n       [:span \"Analytics are anonymized and delivered by \"\n        [:a {:href \"https://posthog.com\" :target \"_blank\"} \"Posthog\"]\n        \" and \" [:a {:href \"https://sentry.io\" :target \"_blank\"} \"Sentry\"]\n        \", open-source solutions to measure retention, performance, and crashes.\n         This lets the designers and engineers at Athens know if we're really making something people love!\"]])))\n\n\n"]}